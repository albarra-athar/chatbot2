---
const examples = [
  "Tambah tugas Quiz 2 untuk Kalkulus besok",
  "Tambah tugas Laporan Praktikum untuk Fisika tanggal 20 jam 19:00 prioritas tinggi",
  "Tugas Kalkulus apa saja?",
  "Tugas besok",
  "Ada tugas apa saja?",
  "Ubah status Quiz 2 jadi selesai",
];
---

<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Chatbot Tracker Tugas Kuliah</title>

    <style>
      :root {
        --bg: #0b1220;
        --card: rgba(255, 255, 255, 0.06);
        --border: rgba(255, 255, 255, 0.12);
        --text: rgba(255, 255, 255, 0.92);
        --muted: rgba(255, 255, 255, 0.7);
        --accent: #60a5fa;
      }

      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans";
        color: var(--text);
        background:
          radial-gradient(1200px 700px at 20% 0%, rgba(96, 165, 250, 0.25), transparent 55%),
          radial-gradient(900px 600px at 80% 30%, rgba(167, 139, 250, 0.18), transparent 60%),
          linear-gradient(180deg, #070b14, #0b1220 60%, #070b14);
        min-height: 100vh;
      }

      .wrap {
        max-width: 1100px;
        margin: 0 auto;
        padding: 44px 18px 90px;
      }

      header {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 18px;
        margin-bottom: 18px;
      }

      .title {
        margin: 0;
        font-size: 32px;
        letter-spacing: -0.02em;
        line-height: 1.1;
      }

      .subtitle {
        margin: 10px 0 0;
        color: var(--muted);
        max-width: 720px;
      }

      .hint {
        margin-top: 14px;
        display: inline-flex;
        gap: 10px;
        align-items: center;
        padding: 10px 12px;
        border-radius: 12px;
        background: rgba(96, 165, 250, 0.12);
        border: 1px solid rgba(96, 165, 250, 0.22);
        color: rgba(255,255,255,0.85);
        font-size: 14px;
      }

      .grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 14px;
        margin-top: 18px;
      }

      @media (min-width: 900px) {
        .grid {
          grid-template-columns: 1fr 1fr;
        }
      }

      .card {
        padding: 16px;
        border-radius: 18px;
        background: var(--card);
        border: 1px solid var(--border);
        backdrop-filter: blur(10px);
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 12px;
        padding: 6px 10px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.14);
        color: rgba(255,255,255,0.85);
        margin-bottom: 10px;
      }

      .card h2 {
        margin: 0 0 8px;
        font-size: 18px;
        letter-spacing: -0.01em;
      }

      .card p, .card li {
        color: var(--muted);
        margin: 0;
        font-size: 14px;
        line-height: 1.55;
      }

      ul { margin: 8px 0 0; padding-left: 18px; }

      .examples {
        margin-top: 14px;
        display: grid;
        grid-template-columns: 1fr;
        gap: 10px;
      }

      @media (min-width: 900px) {
        .examples {
          grid-template-columns: 1fr 1fr;
        }
      }

      .ex {
        display: flex;
        gap: 12px;
        align-items: center;
        justify-content: space-between;
        padding: 12px 12px;
        border-radius: 14px;
        border: 1px solid rgba(255,255,255,0.12);
        background: rgba(0,0,0,0.10);
      }

      .ex span {
        color: rgba(255,255,255,0.85);
        font-size: 14px;
        line-height: 1.35;
      }

      .ex button {
        border: 1px solid rgba(255,255,255,0.18);
        background: rgba(255,255,255,0.08);
        color: rgba(255,255,255,0.9);
        padding: 8px 10px;
        border-radius: 12px;
        cursor: pointer;
        font-weight: 600;
      }

      .ex button:hover {
        background: rgba(255,255,255,0.12);
      }

      .footer-note {
        margin-top: 16px;
        color: rgba(255,255,255,0.6);
        font-size: 12.5px;
      }

      /* Biar df-messenger tidak nutup tombol contoh di layar kecil */
      df-messenger {
        --df-messenger-font-family: ui-sans-serif, system-ui, Segoe UI, Roboto, Arial;
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <header>
        <div>
          <h1 class="title">Chatbot Tracker Tugas Kuliah</h1>
          <p class="subtitle">
            Tambah tugas, cek tugas, dan ubah status lewat chat. Semua tersimpan di database (Supabase) dan berjalan di Vercel.
          </p>
          <div class="hint">üí° Klik contoh di bawah ‚Üí teks otomatis masuk ke chat (tinggal Enter).</div>
        </div>
      </header>

      <section class="grid">
        <div class="card">
          <div class="badge">‚úÖ Tambah tugas</div>
          <h2>Format yang disarankan</h2>
          <p>
            <b>Tambah tugas</b> [judul] <b>untuk</b> [mata kuliah] [tanggal] [jam] <b>prioritas</b> [rendah/sedang/tinggi]
          </p>
          <p style="margin-top:10px">
            Contoh: <i>Tambah tugas Quiz 2 untuk Kalkulus besok</i>
          </p>
        </div>

        <div class="card">
          <div class="badge">üìå Cek & kelola tugas</div>
          <h2>Contoh pertanyaan yang bisa kamu pakai</h2>
          <ul>
            <li><b>Tanya per MK:</b> ‚ÄúTugas Kalkulus apa saja?‚Äù</li>
            <li><b>Tanya per tanggal:</b> ‚ÄúTugas besok‚Äù / ‚ÄúTugas tanggal 20 Januari‚Äù</li>
            <li><b>Semua tugas:</b> ‚ÄúAda tugas apa saja?‚Äù</li>
            <li><b>Ubah status:</b> ‚ÄúUbah status Quiz 2 jadi selesai‚Äù</li>
          </ul>
        </div>
      </section>

      <section class="card" style="margin-top:14px">
        <div class="badge">‚ö° Contoh cepat (klik)</div>

        <div class="examples">
          {examples.map((t) => (
            <div class="ex">
              <span>{t}</span>
              <button type="button" data-example={t}>Pakai</button>
            </div>
          ))}
        </div>

        <div class="footer-note">
          Catatan: jika chat belum muncul, tunggu 1‚Äì2 detik sampai widget selesai load.
        </div>
      </section>
    </div>

    <!-- Dialogflow Messenger -->
    <df-messenger
      chat-title="Chatbot_Tugas_Kuliah"
      agent-id="e6380229-e150-4622-8273-ba23458ecf91"
      language-code="id"
    ></df-messenger>

    <!-- Wajib: bootstrap DF Messenger -->
    <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>

    <!-- Klik contoh -> isi ke input df-messenger (type-safe biar ga merah di VSCode) -->
    <script>
      const messenger = document.querySelector("df-messenger");

      document.addEventListener("click", (e) => {
        const target = e.target;
        if (!(target instanceof HTMLElement)) return;

        const btn = target.closest("button[data-example]");
        if (!btn) return;

        const text = btn.getAttribute("data-example");
        if (!text) return;

        if (!(messenger instanceof HTMLElement)) return;

        const shadow = messenger.shadowRoot;

        const input =
          shadow?.querySelector("df-messenger-chat")
            ?.shadowRoot?.querySelector("df-messenger-user-input")
            ?.shadowRoot?.querySelector("input, textarea");

        if (input instanceof HTMLInputElement || input instanceof HTMLTextAreaElement) {
          input.value = text;
          input.dispatchEvent(new Event("input", { bubbles: true }));
          input.focus();
        } else {
          alert("Chat belum siap. Coba tunggu 1‚Äì2 detik lalu klik lagi.");
        }
      });
    </script>
  </body>
</html>


